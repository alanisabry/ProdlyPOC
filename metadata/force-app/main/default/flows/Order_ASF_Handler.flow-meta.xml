<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Notify_CSM_Owner</name>
        <label>Notify CSM Owner</label>
        <locationX>1118</locationX>
        <locationY>1300</locationY>
        <actionName>chatterPost</actionName>
        <actionType>chatterPost</actionType>
        <connector>
            <targetReference>Update_Cumulative_Indexation</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>text</name>
            <value>
                <elementReference>NotifyCSMOnWaiveIndexation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>subjectNameOrId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>chatterPost</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Waive_Indexation_Approval_Process</name>
        <label>Waive Indexation Approval Process</label>
        <locationX>638</locationX>
        <locationY>1048</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Check_CSM_Owner_on_account</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>submit</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_Movement_values</name>
        <label>Assign Movement values</label>
        <locationX>1204</locationX>
        <locationY>2483</locationY>
        <assignmentItems>
            <assignToReference>IndexationARRMovementAmount</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Indexation_Products.Total_Price__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Indexation_Products</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Movement_values_0</name>
        <label>Assign Movement values</label>
        <locationX>1872</locationX>
        <locationY>2797</locationY>
        <assignmentItems>
            <assignToReference>PreviousIndexationARRMovement</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Movements.Amount__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Movements</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Apply_Indexation</name>
        <label>Apply Indexation?</label>
        <locationX>441</locationX>
        <locationY>598</locationY>
        <defaultConnector>
            <targetReference>Update_Partner_Commission</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Apply</name>
            <conditionLogic>1 AND 2 AND 5 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Apply_Indexation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Indexation_Applied__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Indexation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Indexation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>After Initial Term</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Apply_Indexation__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Apply_Indexation_on_Order</targetReference>
            </connector>
            <label>Apply</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_CSM_Owner_on_account</name>
        <label>Check CSM Owner on account?</label>
        <locationX>934</locationX>
        <locationY>1130</locationY>
        <defaultConnector>
            <targetReference>Update_Cumulative_Indexation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>CSM_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.CSM_Owner__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_CSM_Owner</targetReference>
            </connector>
            <label>CSM Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_indexation_is_reported</name>
        <label>Check if indexation is reported?</label>
        <locationX>743</locationX>
        <locationY>2655</locationY>
        <defaultConnector>
            <targetReference>Create_Indexation_ARR_movements_Credit_Memo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Reported</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IndexationARRMovementAmount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Indexation_ARR_movements</targetReference>
            </connector>
            <label>Reported</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_movements_exist</name>
        <label>Check if movements exist?</label>
        <locationX>1162</locationX>
        <locationY>1887</locationY>
        <defaultConnector>
            <targetReference>Create_Indexation_ARR_movements_Sales_Order</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Indexation_Movements</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delete_movements</targetReference>
            </connector>
            <label>Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Indexation_lines</name>
        <label>Check Indexation lines?</label>
        <locationX>892</locationX>
        <locationY>1739</locationY>
        <defaultConnector>
            <targetReference>Create_Indexation_ARR_movements_Sales_Order</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Indexation_applied</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Indexation_lines</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Adjust_Indexation_Rate_on_account</targetReference>
            </connector>
            <label>Indexation applied</label>
        </rules>
    </decisions>
    <decisions>
        <name>Create_Indexation_ARR_movements_Credit_Memo</name>
        <label>Create Indexation ARR movements - Credit Memo</label>
        <locationX>455</locationX>
        <locationY>3230</locationY>
        <defaultConnector>
            <targetReference>Deactivate_Credit_Memo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Credit_Memo_movements</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_Order_Value__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Indexation_lines</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.First_invoice_of_contract_year__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Original_Order</targetReference>
            </connector>
            <label>Credit Memo movements</label>
        </rules>
    </decisions>
    <decisions>
        <name>Create_Indexation_ARR_movements_Sales_Order</name>
        <label>Create Indexation ARR movements - Sales Order</label>
        <locationX>449</locationX>
        <locationY>2322</locationY>
        <defaultConnector>
            <targetReference>Create_Indexation_ARR_movements_Credit_Memo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Create_movements</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_Order_Value__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Indexation_lines</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.First_invoice_of_contract_year__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Indexation_Products</targetReference>
            </connector>
            <label>Create movements</label>
        </rules>
    </decisions>
    <decisions>
        <name>Dates_Changed</name>
        <label>Dates Changed?</label>
        <locationX>439</locationX>
        <locationY>384</locationY>
        <defaultConnector>
            <targetReference>Apply_Indexation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>1 OR 2 OR (3 AND 4 AND 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.EffectiveDate</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.EndDate</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.EffectiveDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.EndDate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Netsuite_Term__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Calculate_Contract_Term</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Deactivate_Credit_Memo</name>
        <label>Deactivate Credit Memo</label>
        <locationX>451</locationX>
        <locationY>3943</locationY>
        <defaultConnector>
            <targetReference>Order_Pending_Sync</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Deactivated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_Order_Value__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.First_invoice_of_contract_year__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Indexation_movements</targetReference>
            </connector>
            <label>Deactivated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Deactivate_Orders_Indexation</name>
        <label>Deactivate Orders - Indexation</label>
        <locationX>446</locationX>
        <locationY>1574</locationY>
        <defaultConnector>
            <targetReference>Create_Indexation_ARR_movements_Sales_Order</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Deactivate_Orders</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Indexation_Applied__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Total_Order_Value__c</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Indexation_lines</targetReference>
            </connector>
            <label>Deactivate Orders</label>
        </rules>
    </decisions>
    <decisions>
        <name>Indexation_ARR_Movements_exist</name>
        <label>Indexation ARR Movements exist?</label>
        <locationX>956</locationX>
        <locationY>4090</locationY>
        <defaultConnector>
            <targetReference>Order_Pending_Sync</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ARR_movements</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Indexation_movements</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delete_ARR_Movements</targetReference>
            </connector>
            <label>ARR movements</label>
        </rules>
    </decisions>
    <decisions>
        <name>Indexation_is_reported_on_original_order</name>
        <label>Indexation is reported on original order?</label>
        <locationX>1029</locationX>
        <locationY>3345</locationY>
        <defaultConnector>
            <targetReference>Deactivate_Credit_Memo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Indexation_reported</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Original_Order</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Original_Order_Movements</targetReference>
            </connector>
            <label>Indexation reported</label>
        </rules>
    </decisions>
    <decisions>
        <name>Movements_exist</name>
        <label>Movements exist?</label>
        <locationX>1329</locationX>
        <locationY>2716</locationY>
        <defaultConnector>
            <targetReference>Create_Indexation_Movements</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Movements</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Indexation_ARR_movements</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Movements</targetReference>
            </connector>
            <label>Movements</label>
        </rules>
    </decisions>
    <decisions>
        <name>Order_Pending_Sync</name>
        <label>Order Pending Sync</label>
        <locationX>457</locationX>
        <locationY>4394</locationY>
        <defaultConnector>
            <targetReference>Order_Synced_or_Deactivate</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Order_Pending_Sync_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Order_Netsuite_ID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Pending_Sync_to_True</targetReference>
            </connector>
            <label>Order Pending Sync - True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Order_Synced_or_Deactivate</name>
        <label>Order Synced or Deactivate</label>
        <locationX>457</locationX>
        <locationY>4652</locationY>
        <defaultConnector>
            <targetReference>Update_description_on_credit_memo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Order_Synced_or_draft</name>
            <conditionLogic>(1 AND 2 AND 3) OR (4 AND 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Order_Netsuite_ID__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Order_Netsuite_ID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Draft</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetPendingSynctoFalse</targetReference>
            </connector>
            <label>Order Synced or draft</label>
        </rules>
    </decisions>
    <decisions>
        <name>Submit_for_approval_Indexation</name>
        <label>Submit for approval - Indexation</label>
        <locationX>441</locationX>
        <locationY>1004</locationY>
        <defaultConnector>
            <targetReference>Update_Cumulative_Indexation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Submit</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Waive_Indexation__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Waive_Indexation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Waive_Indexation_Reason__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Waive_Indexation_Reason_Detail__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Waive_Indexation_Approval_Process</targetReference>
            </connector>
            <label>Submit</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_Cumulative_Indexation</name>
        <label>Update Cumulative Indexation %</label>
        <locationX>445</locationX>
        <locationY>1235</locationY>
        <defaultConnector>
            <targetReference>Get_Indexation_lines</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Order_Activated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Activated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Indexation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Apply_or_waive_indexation</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Indexation_Applied__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Total_Order_Value__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Order_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sales Order</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Adjust_Indexation_on_account</targetReference>
            </connector>
            <label>Order Activated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_description_on_credit_memo</name>
        <label>Update description on credit memo</label>
        <locationX>467</locationX>
        <locationY>4939</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Update_description</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_Order_Value__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Credit_Memo_Reason__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Downsell Contract Signed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_description_Credit_memo</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Update description</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_Partner_Commission</name>
        <label>Update Partner Commission</label>
        <locationX>439</locationX>
        <locationY>791</locationY>
        <defaultConnector>
            <targetReference>Submit_for_approval_Indexation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Order_Payment_Status</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Payment_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_PRM</targetReference>
            </connector>
            <label>Order Payment Status</label>
        </rules>
    </decisions>
    <description>Create/delete indexation ARR movements on order activation/deactivation</description>
    <environments>Default</environments>
    <formulas>
        <name>ARRMovementAmount</name>
        <dataType>Currency</dataType>
        <expression>({!IndexationARRMovementAmount}*12) - {!PreviousIndexationARRMovement}</expression>
        <scale>8</scale>
    </formulas>
    <formulas>
        <name>CreditMemoIndexationAmount</name>
        <dataType>Currency</dataType>
        <expression>-({!Original_Order_Movements.Amount__c})</expression>
        <scale>8</scale>
    </formulas>
    <formulas>
        <name>frmIsNew</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>isIndexationOnOrderReported</name>
        <dataType>Boolean</dataType>
        <expression>IF({!Loop_Indexation_Products.Product_Name__c}={!$Label.ROW_Indexation_Product_Name} || {!Loop_Indexation_Products.Product_Name__c} = {!$Label.US_Indexation_Product_Name} || {!isIndexationOnOrderReported}
,true,false)</expression>
    </formulas>
    <formulas>
        <name>movementReportingDate</name>
        <dataType>Date</dataType>
        <expression>IF({!$Record.EffectiveDate} &gt; DATEVALUE({!$Record.ActivatedDate}),
{!$Record.EffectiveDate},
DATEVALUE({!$Record.ActivatedDate})
)</expression>
    </formulas>
    <interviewLabel>Order [ASF] Handler {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Order [ASF] Handler</label>
    <loops>
        <name>Loop_Indexation_Products</name>
        <label>Loop Indexation Products</label>
        <locationX>884</locationX>
        <locationY>2482</locationY>
        <collectionReference>Get_Indexation_lines</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Movement_values</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_if_indexation_is_reported</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Movements</name>
        <label>Loop Movements</label>
        <locationX>1564</locationX>
        <locationY>2798</locationY>
        <collectionReference>Indexation_ARR_movements</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Movement_values_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Indexation_Movements</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Indexation_Movements</name>
        <label>Create Indexation Movements</label>
        <locationX>1221</locationX>
        <locationY>3008</locationY>
        <connector>
            <targetReference>Update_Order</targetReference>
        </connector>
        <inputAssignments>
            <field>Amount__c</field>
            <value>
                <elementReference>ARRMovementAmount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>$Record.Opportunity.CurrencyIsoCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Movement_Type__c</field>
            <value>
                <stringValue>Indexation</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Order__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Reporting_Date__c</field>
            <value>
                <elementReference>movementReportingDate</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity_ARR_Movement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Indexation_Movements_0</name>
        <label>Create Indexation Movements</label>
        <locationX>1148</locationX>
        <locationY>3729</locationY>
        <connector>
            <targetReference>Deactivate_Credit_Memo</targetReference>
        </connector>
        <inputAssignments>
            <field>Amount__c</field>
            <value>
                <elementReference>CreditMemoIndexationAmount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>$Record.Opportunity.CurrencyIsoCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Movement_Type__c</field>
            <value>
                <stringValue>Indexation</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Order__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Reporting_Date__c</field>
            <value>
                <elementReference>movementReportingDate</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity_ARR_Movement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordDeletes>
        <name>Delete_ARR_Movements</name>
        <label>Delete ARR Movements</label>
        <locationX>1203</locationX>
        <locationY>4225</locationY>
        <connector>
            <targetReference>Order_Pending_Sync</targetReference>
        </connector>
        <inputReference>Indexation_movements</inputReference>
    </recordDeletes>
    <recordDeletes>
        <name>Delete_Indexation_Product</name>
        <label>Delete Indexation Product</label>
        <locationX>1466</locationX>
        <locationY>1801</locationY>
        <connector>
            <targetReference>Clear_Indexation_Values_On_Order</targetReference>
        </connector>
        <inputReference>Get_Indexation_lines</inputReference>
    </recordDeletes>
    <recordDeletes>
        <name>Delete_movements</name>
        <label>Delete movements</label>
        <locationX>1244</locationX>
        <locationY>2126</locationY>
        <connector>
            <targetReference>Create_Indexation_ARR_movements_Sales_Order</targetReference>
        </connector>
        <inputReference>Get_Indexation_Movements</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>Get_Indexation_lines</name>
        <label>Get Indexation lines</label>
        <locationX>250</locationX>
        <locationY>1408</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Deactivate_Orders_Indexation</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR 4 OR 5)</filterLogic>
        <filters>
            <field>OrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Product_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Label.ROW_Indexation_Product_Name</elementReference>
            </value>
        </filters>
        <filters>
            <field>Product_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Label.ROW_Indexation_Waiver_Product_Name</elementReference>
            </value>
        </filters>
        <filters>
            <field>Product_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Label.US_Indexation_Product_Name</elementReference>
            </value>
        </filters>
        <filters>
            <field>Product_Name__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Label.US_Indexation_Waiver_Product_Name</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OrderItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Indexation_Movements</name>
        <label>Get Indexation Movements</label>
        <locationX>1501</locationX>
        <locationY>2140</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_if_movements_exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Order__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity_ARR_Movement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Original_Order</name>
        <label>Get Original Order</label>
        <locationX>672</locationX>
        <locationY>3336</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Indexation_is_reported_on_original_order</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>EffectiveDate</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.EffectiveDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>Is_indexation_on_order_reported__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OpportunityId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Total_Order_Value__c</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Activated</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Indexation_ARR_movements</name>
        <label>Indexation ARR movements</label>
        <locationX>1124</locationX>
        <locationY>2714</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Movements_exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OpportunityId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Movement_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Indexation</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </filters>
        <filters>
            <field>Order__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity_ARR_Movement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Indexation_movements</name>
        <label>Indexation movements</label>
        <locationX>759</locationX>
        <locationY>4002</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Indexation_ARR_Movements_exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OpportunityId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Movement_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Indexation</stringValue>
            </value>
        </filters>
        <filters>
            <field>Order__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity_ARR_Movement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Original_Order_Movements</name>
        <label>Original Order Movements</label>
        <locationX>1149</locationX>
        <locationY>3565</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Indexation_Movements_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Order__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Original_Order.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity_ARR_Movement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Adjust_Indexation_on_account</name>
        <label>Adjust Indexation % on account</label>
        <locationX>924</locationX>
        <locationY>1392</locationY>
        <connector>
            <targetReference>Get_Indexation_lines</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Cumulative_Indexation__c</field>
            <value>
                <elementReference>$Record.Applied_Indexation_Rate__c</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Adjust_Indexation_Rate_on_account</name>
        <label>Adjust Indexation % on account</label>
        <locationX>1257</locationX>
        <locationY>1701</locationY>
        <connector>
            <targetReference>Delete_Indexation_Product</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Cumulative_Indexation__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Applied_Indexation_Rate__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Cumulative_Indexation__c</field>
            <value>
                <elementReference>$Record.Previous_Indexation_Rate__c</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Clear_Indexation_Values_On_Order</name>
        <label>Clear Indexation Values On Order</label>
        <locationX>1483</locationX>
        <locationY>1958</locationY>
        <connector>
            <targetReference>Get_Indexation_Movements</targetReference>
        </connector>
        <inputAssignments>
            <field>Applied_Indexation_Rate__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Apply_Indexation__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Current_Indexation_Rate__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Indexation_Applied__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Is_indexation_on_order_reported__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Previous_Indexation_Rate__c</field>
        </inputAssignments>
        <inputAssignments>
            <field>Waived_Indexation_Amount__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Pending_Sync_to_True</name>
        <label>Set Pending Sync to True</label>
        <locationX>968</locationX>
        <locationY>4456</locationY>
        <connector>
            <targetReference>Order_Synced_or_Deactivate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Order_sync_pending__c</field>
            <value>
                <elementReference>Order_Pending_Sync_True</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>SetPendingSynctoFalse</name>
        <label>Set Pending Sync to False</label>
        <locationX>880</locationX>
        <locationY>4739</locationY>
        <connector>
            <targetReference>Update_description_on_credit_memo</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Order_sync_pending__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_description_Credit_memo</name>
        <label>Update description - Credit memo</label>
        <locationX>892</locationX>
        <locationY>5010</locationY>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>$Record.Credit_Memo_Reason__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Order</name>
        <label>Update Order</label>
        <locationX>993</locationX>
        <locationY>2974</locationY>
        <connector>
            <targetReference>Create_Indexation_ARR_movements_Credit_Memo</targetReference>
        </connector>
        <inputAssignments>
            <field>Is_indexation_on_order_reported__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_PRM</name>
        <label>Update PRM</label>
        <locationX>669</locationX>
        <locationY>886</locationY>
        <connector>
            <targetReference>Submit_for_approval_Indexation</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Order__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Start_Date__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.EffectiveDate</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Order_Payment_Status__c</field>
            <value>
                <elementReference>$Record.Payment_Status__c</elementReference>
            </value>
        </inputAssignments>
        <object>Partner_Commission__c</object>
    </recordUpdates>
    <start>
        <locationX>320</locationX>
        <locationY>83</locationY>
        <connector>
            <targetReference>Dates_Changed</targetReference>
        </connector>
        <object>Order</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>Apply_Indexation_on_Order</name>
        <label>Apply Indexation on Order</label>
        <locationX>677</locationX>
        <locationY>673</locationY>
        <connector>
            <targetReference>Update_Partner_Commission</targetReference>
        </connector>
        <flowName>Indexation</flowName>
        <inputAssignments>
            <name>vOrder</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Calculate_Contract_Term</name>
        <label>Calculate Contract Term</label>
        <locationX>653</locationX>
        <locationY>431</locationY>
        <connector>
            <targetReference>Apply_Indexation</targetReference>
        </connector>
        <flowName>Contract_Term_Calculation</flowName>
        <inputAssignments>
            <name>Var_EndDate</name>
            <value>
                <elementReference>$Record.EndDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Var_Order</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Var_StartDate</name>
            <value>
                <elementReference>$Record.EffectiveDate</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>MessageforCSMOnIndexation</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text># Indexation Waiver Approval
@[{!$Record.Account.CSM_Owner__c}] Credit memo has been created for waiving indexation on order {!$Record.Original_Order__r.OrderNumber}</text>
    </textTemplates>
    <textTemplates>
        <name>NotifyCSMOnWaiveIndexation</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text># Indexation Waiver Approval
@[{!$Record.Account.CSM_Owner__c}] Indexation Waiver request on the order has been sent for approval.</text>
    </textTemplates>
    <variables>
        <name>indexationAmount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>8</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>IndexationARRMovementAmount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>8</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>indexationMovementARR</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>8</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>indexationWaiverAmount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>8</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>movementRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity_ARR_Movement__c</objectType>
    </variables>
    <variables>
        <name>movementsList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity_ARR_Movement__c</objectType>
    </variables>
    <variables>
        <name>PreviousIndexationARRMovement</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>8</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
</Flow>
