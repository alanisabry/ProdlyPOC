<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>MRR_movements_on_Platform_Transfer</fullName>
    <active>true</active>
    <errorConditionFormula>AND(
  CloseDate &gt;= DATE(2020,3,9),
  NOT($Profile.Name = &quot;Automated Process&quot;),
  NOT(CONTAINS($Profile.Name,&quot;System Administrator&quot;)),
  ISPICKVAL(StageName, &quot;Closed Won&quot;),
  ISPICKVAL(Type, &quot;Existing Business - Platform Transfer&quot;),
  OR(
    AND(
      OR(
        ISCHANGED(Expansion__c),
        ISCHANGED(New_MRR_Platform_transfer__c),
        ISCHANGED(Internal_Transfer__c)
      ),
      NOT(ROUND(New_MRR_Platform_transfer__c, 2) + ROUND(Expansion__c, 2) + ROUND(Internal_Transfer__c, 2) = ROUND(MRR_from_Products__c, 2))
    ),
    NOT(ISBLANK(New_MRR__c)),
    NOT(ISBLANK(Churn__c)),
    NOT(ISBLANK(Contraction__c)),
    NOT(ISBLANK(Renewal__c))
  )   
)</errorConditionFormula>
    <errorDisplayField>New_MRR_Platform_transfer__c</errorDisplayField>
    <errorMessage>For platform transfer opps, only the New MRR: Platform Transfer, Internal Transfer, and Expansion fields should be filled and it should match MRR from products.</errorMessage>
</ValidationRule>
