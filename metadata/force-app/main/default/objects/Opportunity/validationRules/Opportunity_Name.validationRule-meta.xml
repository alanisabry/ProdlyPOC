<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Opportunity_Name</fullName>
    <active>true</active>
    <description>The Opportunity Name field must contain 80 characters or fewer if the One Off field is greater than 0. This is a requirement for Mavenlink projects.</description>
    <errorConditionFormula>AND( 
NOT($Profile.Name = &quot;System Administrator&quot;), 
NOT($Profile.Name = &quot;Automated Process&quot;),
NOT(ISNEW()),
NOT(CreatedDate&gt;Now()-0.0007),
OR(ISPICKVAL(Type,&quot;Existing Business-Professional Services&quot;),
One_off__c &gt; 0), 
LEN(Name) &gt; 80, 
NOT(ISPICKVAL(StageName, &quot;Closed Won&quot;)))</errorConditionFormula>
    <errorMessage>The opportunity name is too long. Please shorten the record name to 80 characters or fewer.</errorMessage>
</ValidationRule>
